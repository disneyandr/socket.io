<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- <meta http-equiv="refresh" content="5"> -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"> </script>
    
</head>

<body>
    <div class="container">
       <h1>Tasks</h1>
       <div id="msgs"></div>
       <input type="text" />
    </div>
    <!-- ouvindo a conexão -->
    <script>
        var socket = io();
        //quando o cliente conectar
        socket.on('connect', function() {
            $("#msgs").append('Connected with ID: '+socket.id+'<br>')
            //enviando para o servidor uma mensagem
            socket.emit('msg', 'Cliente está conectado: '+socket.id)
        })
        socket.on('msg', function(msg) {
            $("#msgs").append(msg+'<br>')
        })
        $(function() {
            $("input").keydown(function(key) {
                console.log(key.keyCode)
                if(key.keyCode === 13){
                    socket.emit('msg', $(this).val())
                    $(this).val('')
                }
            })
        })
    </script>
</body>

</html>